<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thmyeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

<head th:insert="fragments/header :: header"></head>
<div th:insert="fragments/user_info :: user_info"></div>

<h1>My games</h1>

<body>
<div>
    <h3 th:if="${#vars['flash.message']}" th:text="${#vars['flash.message']}" class="flash"></h3>
    <ul>
        <li th:each="game : ${mygames}">
            <div class="game">
                <h3><a th:href="@{'/mygames/' + ${game.id}}" th:text="${game.title}"/></h3>
                <p th:text="${game.description}"/>
                <span th:if="${#lists.isEmpty(game.images)}">No images for this game uploaded</span>
                <ul>
                    <li th:each="gameImage : ${game.images}">
                        <img class="thumbnail" th:src="@{'/images/' + ${gameImage.name} + '/raw'}"/>
                    </li>
                </ul>

                <div class="image_upload_for_game">
                    Upload more images
                    <form method="post" enctype="multipart/form-data"
                          th:action="@{'/games/' + ${game.id} + '/images'}">
                        <p><input type="file" name="file"/></p>
                        <!--<input type="hidden" name="gameId" th:value="${game.id}">-->
                        <p><input type="submit" value="Upload"/></p>
                    </form>
                </div>

                <span th:text="${game.owner.username}"/>
            </div>
        </li>
    </ul>
</div>
</body>
</html>